{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./source/js/api.js","webpack://keksobooking/./source/js/popup.js","webpack://keksobooking/./source/js/form.js","webpack://keksobooking/./source/js/card.js","webpack://keksobooking/./source/js/map.js","webpack://keksobooking/./source/js/avatar.js","webpack://keksobooking/./source/js/filter.js","webpack://keksobooking/./source/js/main.js","webpack://keksobooking/./source/js/util.js"],"sourcesContent":["const DATA = 'https://23.javascript.pages.academy/keksobooking/data';\nconst SERVER = 'https://23.javascript.pages.academy/keksobooking';\n\n\nconst getData = (onSuccess, onFail) => {\n  fetch(DATA)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then((response) => {\n      onSuccess(response);\n    })\n    .catch((err) => {\n      onFail(`Ошибка загрузки данных ${err}`);\n    });\n};\n\n\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    SERVER, {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess('Ваше объявление успешно размещено!');\n      } else if (response.status >= 500 && response.status <= 505) {\n        onFail('Не удалось получить данные с сервера. Попробуйте ещё раз!');\n      } else {\n        onFail('Не удалось отправить форму. Попробуйте ещё раз!');\n      }\n    })\n    .catch(() => {\n      onFail('Не удалось отправить форму. Попробуйте ещё раз!');\n    });\n};\n\nexport { getData, sendData };\n\n\n\n","const ESC_ALL_BROWSERS = 'Escape';\nconst ESC_IE = 'Esc';\n\nconst isEscEvent = (evt) => evt.key === ESC_ALL_BROWSERS || evt.key === ESC_IE;\n\nconst successPopup = document.querySelector('#success').content.querySelector('.success').cloneNode(true);\nconst errorPopup = document.querySelector('#error').content.querySelector('.error').cloneNode(true);\nconst errorPopupMessage = errorPopup.querySelector('.error__message');\nconst closeErrorButton = errorPopup.querySelector('.error__button');\n\nconst showSuccessModal = () => {\n  document.body.appendChild(successPopup);\n  const keydownHandler = (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      successPopup.remove();\n      document.removeEventListener('keydown', keydownHandler);\n    }\n  };\n  document.addEventListener('keydown', keydownHandler);\n  successPopup.addEventListener('click', () => {\n    successPopup.remove();\n    document.removeEventListener('keydown', keydownHandler);\n  });\n};\n\nconst showErrorModal = () => {\n  errorPopupMessage.textContent = 'Ошибка загрузки данных';\n  document.body.appendChild(errorPopup);\n  const keydownHandler = (evt) => {\n    if (isEscEvent(evt)) {\n      evt.preventDefault();\n      errorPopup.remove();\n      document.removeEventListener('keydown', keydownHandler);\n    }\n  };\n  document.addEventListener('keydown', keydownHandler);\n  closeErrorButton.addEventListener('click', () => {\n    errorPopup.remove();\n    document.removeEventListener('keydown', keydownHandler);\n  });\n  errorPopup.addEventListener('click', () => {\n    errorPopup.remove();\n    document.removeEventListener('keydown', keydownHandler);\n  });\n};\n\nexport {\n  showSuccessModal,\n  showErrorModal\n};\n","import {  sendData  } from './api.js';\nimport {   showSuccessModal, showErrorModal } from './popup.js'\n\nconst MIN_PRICE_OF_TYPE = {\n  bungalow: '0',\n  flat: '1000',\n  hotel: '3000',\n  house: '5000',\n  palace: '10000',\n};\nconst priceForm = document.querySelector('#price');\nconst typeForm = document.querySelector('#type');\nconst timeIn = document.querySelector('#timein');\nconst timeOut = document.querySelector('#timeout');\nconst addressForm = document.querySelector('#address');\nconst selectRooms = document.querySelector('#room_number');\nconst capacity = document.querySelector('#capacity');\n\nconst mapFilters = document.querySelector('.map__filters');\nconst mapFiltersChildren = mapFilters.children;\nconst adForm = document.querySelector('.ad-form');\nconst adFormElements = adForm.querySelectorAll('fieldset');\n\n// Неактивное состояние. При открытии страница находится в неактивном состоянии\n\nconst toInactiveForm = function () {\n  mapFilters.classList.add('ad-form--disabled');\n  for (let element of mapFiltersChildren) {\n    element.setAttribute('disabled', 'disabled');\n  }\n\n  adForm.classList.add('ad-form--disabled');\n  adFormElements.forEach((element) => {\n    element.setAttribute('disabled', 'disabled');\n  });\n};\nconst toActiveForm = function () {\n  mapFilters.classList.remove('ad-form--disabled');\n  for (let element of mapFiltersChildren) {\n    element.removeAttribute('disabled');\n  }\n\n  adForm.classList.remove('ad-form--disabled');\n  adFormElements.forEach((element) => {\n    element.removeAttribute('disabled');\n  });\n};\n\n//  выбор опции меняет атрибуты минимального значения и плейсхолдера поля «Цена за ночь»;\n\nconst onPriceOfType = function ( ) {\n  priceForm.value = '';\n  priceForm.placeholder = MIN_PRICE_OF_TYPE[typeForm.value];\n  priceForm.min = MIN_PRICE_OF_TYPE[typeForm.value];\n};\ntypeForm.addEventListener('change', onPriceOfType);\n\n// выбор опции одного поля автоматически изменят значение другого.\n\nconst onTimeIn = function ( ) {\n  timeOut.value = timeIn.value;\n};\nconst onTimeOut = function ( ) {\n  timeIn.value = timeOut.value;\n};\ntimeIn.addEventListener('change', onTimeIn);\ntimeOut.addEventListener('change', onTimeOut);\n\n// запись текущих координат в офрму\nconst getCurrentPosition = function (coordinates) {\n  addressForm.setAttribute('readonly', 'readonly');\n  addressForm.value = `${(coordinates.lat).toFixed(5)},  ${(coordinates.lng).toFixed(5)}`;\n};\n\n// валидация формы\n\n// кол-во комнат кол-во гостей\n\nconst formValidation = function () {\n  if (selectRooms.value < capacity.value) {\n    capacity.setCustomValidity(`В ${selectRooms.value} комнате возможно разместить только ${selectRooms.value} гостя`);\n  } else {\n    capacity.setCustomValidity('');\n  }\n  capacity.reportValidity();\n\n\n  capacity.addEventListener('change', (evt) => {\n    if (evt.currentTarget.value > selectRooms.value) {\n      capacity.style.borderColor = 'red';\n      capacity.setCustomValidity(`В ${selectRooms.value} комнате возможно разместить до  ${selectRooms.value} гостей`);\n    } else if (capacity.value == '0') {\n      capacity.style.borderColor = 'red';\n      capacity.setCustomValidity('Не для гостей');\n    } else {\n      capacity.setCustomValidity('');\n    }\n    capacity.reportValidity();\n  });\n\n  selectRooms.addEventListener('change', (evt) => {\n    if ((evt.currentTarget.value < capacity.value) && (selectRooms.value !== '100')) {\n      capacity.style.borderColor = 'red';\n      capacity.setCustomValidity(`В ${evt.currentTarget.value} комнате возможно разместить до ${evt.currentTarget.value} гостей`);\n    } else if (selectRooms.value === '100') {\n      capacity.style.borderColor = 'red';\n      capacity.setCustomValidity('Не для гостей');\n    } else {\n      capacity.setCustomValidity('');\n    }\n    capacity.reportValidity();\n  });\n\n};\n\nconst setUserFormSubmit = () => {\n  adForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    sendData(showSuccessModal, showErrorModal, new FormData(evt.target));\n  });\n};\n\nexport { onPriceOfType, onTimeIn,  onTimeOut, toInactiveForm, toActiveForm, getCurrentPosition, formValidation, setUserFormSubmit };\n\n","const TYPES_OF_HOUSING = {\n  'flat': 'Квартира',\n  'bungalow': 'Бунгало',\n  'house': 'Дом',\n  'palace': 'Дворец',\n  'hotel': 'Отель',\n};\n\nconst templateCard = document.querySelector('#card').content.querySelector('.popup');\n\n\n// создаём фото из масива\nconst createPhotos = (photos) => {\n  const photosFragment = document.createDocumentFragment();\n\n  for (let i = 0; i < photos.length; i++) {\n    const newPhoto = document.createElement('img');\n    newPhoto.src = photos[i];\n    newPhoto.classList.add('popup__photo');\n    newPhoto.alt = 'Фотография жилья';\n    newPhoto.setAttribute('width', '45');\n    newPhoto.setAttribute('height', '40');\n    photosFragment.appendChild(newPhoto);\n  }\n\n  return photosFragment;\n};\n\n// создаём Features\nconst createFeatures = (features) => {\n  const featuresFragment = document.createDocumentFragment();\n  features.forEach((element) => {\n    const feature = document.createElement('li');\n    feature.classList.add('popup__feature', `popup__feature--${element}`);\n    featuresFragment.appendChild(feature);\n  });\n  return featuresFragment;\n};\n\nconst renderCard = function ({author, offer}) {\n  const newCard = templateCard.cloneNode(true);\n\n  newCard.querySelector('.popup__title').textContent = offer.title || '';\n  newCard.querySelector('.popup__text--address').textContent = offer.address || '';\n  newCard.querySelector('.popup__text--price').textContent = `${offer.price} ₽/ночь` || '';\n  newCard.querySelector('.popup__type').textContent = TYPES_OF_HOUSING[offer.type] || '';\n  newCard.querySelector('.popup__text--capacity').textContent = `${offer.rooms} комнаты для ${offer.guests} гостей` || '';\n  newCard.querySelector('.popup__text--time').textContent = `Заезд после ${offer.checkin}, выезд до ${offer.checkout}` || '';\n  newCard.querySelector('.popup__description').textContent = offer.description || '';\n  newCard.querySelector('.popup__avatar').src = author.avatar || 'img/avatars/default.png';\n\n\n  const cardFeatures = newCard.querySelector('.popup__features');\n  cardFeatures.innerHTML = '';\n  if (offer.features) {\n    const newFeatureElements = createFeatures(offer.features);\n    cardFeatures.appendChild(newFeatureElements);\n  } else {\n    cardFeatures.remove();\n  }\n\n\n  const cardPhotos = newCard.querySelector('.popup__photos');\n  cardPhotos.innerHTML = '';\n  if (offer.photos) {\n    const newPhotoElements = createPhotos(offer.photos);\n    cardPhotos.appendChild(newPhotoElements);\n  } else {\n    cardPhotos.remove();\n  }\n\n  return newCard;\n};\n\n\n\nexport { renderCard, TYPES_OF_HOUSING };\n\n\n\n\n\n","import { toActiveForm, getCurrentPosition } from './form.js';\nimport { renderCard } from './card.js';\n\nconst L = window.L;\nconst TOKYO = {\n  lat: 35.67487,\n  lng:   139.75039,\n};\nconst ZOOM_MAP = 13;\n\nconst map = L.map('map-canvas');\n\n//  маркер\nconst MarkerIcon = L.icon({\n  iconUrl: './leaflet/img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\n// главный маркер\nconst mainMarkerIcon = L.icon({\n  iconUrl: './leaflet/img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst mainMarker = L.marker(\n  TOKYO,\n  {\n    draggable: true,\n    icon: mainMarkerIcon,\n  },\n);\n\n// добавление меток на карту\n// Создание слоя с группой меток\nconst markerGroup = L.layerGroup().addTo(map);\n// Очищение слоя с метками объявлений\nconst clearMarker = () => markerGroup.clearLayers();\n\nconst createMarker = (data) => {\n  const marker = L.marker(\n    data.location,\n    {\n      icon: MarkerIcon,\n    },\n  );\n  marker.addTo(markerGroup).bindPopup(renderCard(data));\n};\n\n\n\nconst renderCardList = function (offersArr) {\n  offersArr.forEach((element) => {\n    createMarker(element);\n  });\n};\n\nconst getMap = () => {\n  map.on('load', () => {\n    toActiveForm(); // При успешной загрузке карты форма \"Ваше объявление\" переключается в активное состояние\n    getCurrentPosition(TOKYO);\n  });\n\n  map.setView(TOKYO,  ZOOM_MAP);\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors' })\n    .addTo(map);\n\n\n  mainMarker.addTo(map);\n};\n\n// выбор адреса путём перемещения главной метки.\n\nconst currentPosMarker = function () {\n  mainMarker.on('moveend', (evt) => {\n    const currentPos = evt.target.getLatLng();\n    getCurrentPosition(currentPos);\n  });\n};\n\n\n\n\nexport { getMap, currentPosMarker, renderCardList,clearMarker };\n","const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst fileChooser = document.querySelector('#avatar');\nconst preview = document.querySelector('.ad-form-header__preview-img');\n\n\nconst showPreviewUploadPhoto = () => {\n  fileChooser.addEventListener('change', () => {\n    const file = fileChooser.files[0];\n    const fileName = file.name.toLowerCase();\n\n    const matches = FILE_TYPES.some((it) => {\n      return fileName.endsWith(it);\n    });\n\n    if (matches) {\n      const reader = new FileReader();\n\n      reader.addEventListener('load', () => {\n        preview.src = reader.result;\n      });\n\n      reader.readAsDataURL(file);\n    }\n  });\n};\n\nexport {showPreviewUploadPhoto};\n","import { clearMarker } from './map.js';\n\nconst mapFilters = document.querySelector('.map__filters');\nconst typeFilter = mapFilters.querySelector('#housing-type');\nconst priceFilter = mapFilters.querySelector('#housing-price');\nconst roomsFilter = mapFilters.querySelector('#housing-rooms');\nconst guestsFilter = mapFilters.querySelector('#housing-guests');\nconst filterFeatures = mapFilters.querySelectorAll('.map__checkbox');\n\nconst priceFilterData = {\n  low: {\n    start: 0,\n    end: 10000,\n  },\n  middle: {\n    start: 10000,\n    end: 50000,\n  },\n  high: {\n    start: 50000,\n    end: 1000000,\n  },\n};\n\nconst checkType = (element) => typeFilter.value === element.offer.type || typeFilter.value === 'any';\n\nconst checkPrice = (element) => priceFilter.value === 'any' || (element.offer.price >= priceFilterData[priceFilter.value].start && element.offer.price <= priceFilterData[priceFilter.value].end);\n\nconst checkRooms = (element) => +roomsFilter.value === element.offer.rooms || roomsFilter.value === 'any';\n\nconst checkGuests = (element) => +guestsFilter.value === element.offer.guests || guestsFilter.value === 'any';\n\nconst checkFeatures = (element) => Array.from(filterFeatures)\n  .every((filterFeatures) => {\n    if (!filterFeatures.checked) {\n      return true;\n    }\n    if (!element.offer.features) {\n      return false;\n    }\n    return element.offer.features.includes(filterFeatures.value);\n  });\n\n\nconst getFilter = function (servData) {\n  const filteredData = [];\n  for (let element of servData) {\n    if (\n      checkType(element) &&\n      checkPrice(element) &&\n      checkRooms(element) &&\n      checkGuests(element) &&\n      checkFeatures(element)\n    ) {\n      filteredData.push(element);\n    }\n  }\n  return filteredData;\n};\n\n// Перерисовка карты\n\nconst changeFilters = (cb) => {\n  mapFilters.addEventListener('change', () => {\n    clearMarker(),\n    cb();\n  });\n};\n\nexport { getFilter, changeFilters };\n","import { getData } from './api.js';\nimport {  toInactiveForm, formValidation, setUserFormSubmit } from './form.js';\nimport  { getMap, currentPosMarker, renderCardList }  from './map.js';\nimport {showPreviewUploadPhoto} from './avatar.js';\nimport { changeFilters, getFilter } from './filter.js';\nimport { debounce } from './util.js';\n\nconst selectRooms = document.querySelector('#room_number');\n\n\ntoInactiveForm();\ngetMap();\n\ngetData((data)=> {\n  renderCardList(data.slice(0, 10)); // добавление меток на карту\n  changeFilters(debounce(()=> {\n    const filteredData = getFilter(data);\n    renderCardList(filteredData.slice(0, 10));\n  }, 500));\n});\ncurrentPosMarker();\nformValidation(selectRooms);\nshowPreviewUploadPhoto();\n\n\nsetUserFormSubmit();\n\n","const ALERT_SHOW_TIME = 3000;\n\n// случайное положительное  число\nconst getRandomInteger = (min, max) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n// случайное число с палвающей запятой\nconst getRandomFloatingPointNumber = (min, max, decimalPlaces) => {\n  if (min < 0 || max < 0) {\n    return -1;\n  }\n\n  if (max < min) {\n    [min, max] = [max, min];\n  }\n\n  return (min + Math.random() * (max - min)).toFixed(decimalPlaces);\n};\n\n// массив случайной длины из значений без повторений\nconst getRandomArr = (arr) => {\n  function makeRandomArr() {\n    return Math.random() - 0.5;\n  }\n\n  let mixFeatures = arr.sort(makeRandomArr).slice(0, getRandomInteger(1, arr.length));\n  return mixFeatures;\n};\n\n// сообщение об ошибке\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'fixed';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\n// debounce\n\nconst debounce = function ( callback, delay ) {\n  let timeout;\n  return function() {\n    clearTimeout( timeout );\n    timeout = setTimeout( callback, delay );\n  };\n};\n\nexport { getRandomInteger, getRandomFloatingPointNumber, getRandomArr, showAlert, debounce };\n"],"names":["isEscEvent","evt","key","successPopup","document","querySelector","content","cloneNode","errorPopup","errorPopupMessage","closeErrorButton","showSuccessModal","body","appendChild","keydownHandler","preventDefault","remove","removeEventListener","addEventListener","showErrorModal","textContent","MIN_PRICE_OF_TYPE","bungalow","flat","hotel","house","palace","priceForm","typeForm","timeIn","timeOut","addressForm","selectRooms","capacity","mapFilters","mapFiltersChildren","children","adForm","adFormElements","querySelectorAll","value","placeholder","min","getCurrentPosition","coordinates","setAttribute","toFixed","TYPES_OF_HOUSING","templateCard","L","window","TOKYO","lat","lng","map","MarkerIcon","icon","iconUrl","iconSize","iconAnchor","mainMarkerIcon","mainMarker","marker","draggable","markerGroup","layerGroup","addTo","renderCardList","offersArr","forEach","element","data","location","bindPopup","author","offer","newCard","title","address","price","type","rooms","guests","checkin","checkout","description","src","avatar","cardFeatures","innerHTML","features","newFeatureElements","featuresFragment","createDocumentFragment","feature","createElement","classList","add","createFeatures","cardPhotos","photos","newPhotoElements","photosFragment","i","length","newPhoto","alt","createPhotos","renderCard","FILE_TYPES","fileChooser","preview","typeFilter","priceFilter","roomsFilter","guestsFilter","filterFeatures","priceFilterData","low","start","end","middle","high","checkType","checkPrice","checkRooms","checkGuests","checkFeatures","Array","from","every","checked","includes","onSuccess","toInactiveForm","on","removeAttribute","toActiveForm","setView","tileLayer","attribution","cb","slice","callback","delay","timeout","clearTimeout","setTimeout","debounce","filteredData","servData","push","getFilter","clearLayers","fetch","then","response","ok","json","Error","status","statusText","catch","err","onFail","currentPos","target","getLatLng","setCustomValidity","reportValidity","currentTarget","style","borderColor","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","result","readAsDataURL","FormData","method"],"sourceRoot":""}